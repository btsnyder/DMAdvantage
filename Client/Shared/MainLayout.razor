@inherits LayoutComponentBase
@inject IAccountService AccountService
@inject NavigationManager NavigationManager

<MudThemeProvider IsDarkMode="true" Theme="MyCustomTheme"/>
<MudDialogProvider/>
<MudSnackbarProvider/>

<MudLayout>
    @if (AccountService.GetLoggedIn())
    {
        <MudAppBar Elevation="1">
            <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="@(_ => DrawerToggle())" />
            <MudText Typo="Typo.h5" class="ml-3">DM Advantage</MudText> 
        </MudAppBar>
    }
    <MudDrawer @bind-Open="@_drawerOpen" Variant="DrawerVariant.Temporary">
        <MyNavMenu/>
    </MudDrawer>
    <MudMainContent Class="ma-4">
        @Body
    </MudMainContent>
</MudLayout>

@code {
    bool _drawerOpen;

    void DrawerToggle()
    {
        _drawerOpen = !_drawerOpen;
    }

    MudTheme MyCustomTheme = new MudTheme()
    {
        PaletteDark = new Palette()
        {
            Primary = Colors.Indigo.Lighten1,
            Secondary = Colors.DeepPurple.Lighten1,
            Tertiary = Colors.Teal.Default,
            Success = Colors.Green.Accent4,
            Background = Colors.Grey.Darken3,
            DrawerBackground = Colors.Grey.Darken3,
            DrawerText = Colors.Shades.White,
            DrawerIcon = Colors.Shades.White,
            BackgroundGrey = Colors.Grey.Darken1,
            AppbarBackground = Colors.Indigo.Darken2,
            Surface = Colors.Grey.Darken3,
            TextPrimary = Colors.Shades.White,
            TextSecondary = Colors.Grey.Default,
            ActionDefault = Colors.Grey.Lighten4,
            ActionDisabled = Colors.Grey.Darken1,
            LinesDefault = Colors.Grey.Lighten4,
            Dark = Colors.Grey.Darken1
        }
    };
}