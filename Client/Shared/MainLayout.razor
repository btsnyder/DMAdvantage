@inherits LayoutComponentBase
@inject IAccountService AccountService
@inject NavigationManager NavigationManager

<MudThemeProvider IsDarkMode="true" Theme="MyCustomTheme"/>
<MudDialogProvider/>
<MudSnackbarProvider/>

<MudLayout>
    @if (AccountService.IsLoggedIn())
    {
        <MudAppBar Elevation="1">
            @*<MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="@(_ => DrawerToggle())" />*@
            <MudText Typo="Typo.h5" Class="mx-3">DM Advantage</MudText> 
            <MudMenu Class="mx-3" StartIcon="@Icons.Filled.BarChart" Label="Data">
                <MudMenuItem OnClick="@(() => NavigationManager.NavigateTo("characters"))">
                    <MudIcon Class="me-2" Icon="@Icons.Filled.Person"/>Characters
                </MudMenuItem>
                <MudMenuItem OnClick="@(() => NavigationManager.NavigateTo("creatures"))">
                    <MudIcon Class="me-2" Icon="@Icons.Filled.CrueltyFree"/>Creatures
                </MudMenuItem>
                <MudMenuItem OnClick="@(() => NavigationManager.NavigateTo("forcepowers"))">
                    <MudIcon Class="me-2" Icon="@Icons.Filled.BackHand"/>Force Powers
                </MudMenuItem>
                <MudMenuItem OnClick="@(() => NavigationManager.NavigateTo("techpowers"))">
                    <MudIcon Class="me-2" Icon="@Icons.Filled.FlashOn"/>Tech Powers
                </MudMenuItem>
                <MudMenuItem OnClick="@(() => NavigationManager.NavigateTo("abilities"))">
                    <MudIcon Class="me-2" Icon="@Icons.Filled.PersonAdd"/>Abilities
                </MudMenuItem>
                <MudMenuItem OnClick="@(() => NavigationManager.NavigateTo("classes"))">
                    <MudIcon Class="me-2" Icon="@Icons.Filled.Star"/>Classes
                </MudMenuItem>
                <MudMenuItem OnClick="@(() => NavigationManager.NavigateTo("weapons"))">
                    <MudIcon Class="me-2" Icon="@Icons.Filled.AutoFixHigh"/>Weapons
                </MudMenuItem>
                <MudMenuItem OnClick="@(() => NavigationManager.NavigateTo("weaponproperties"))">
                    <MudIcon Class="me-2" Icon="@Icons.Filled.Build"/>Weapon Properties
                </MudMenuItem>
                <MudMenuItem OnClick="@(() => NavigationManager.NavigateTo("enemyships"))">
                    <MudIcon Class="me-2" Icon="@Icons.Filled.DirectionsBoat"/>Ships
                </MudMenuItem>
                <MudMenuItem OnClick="@(() => NavigationManager.NavigateTo("playerships"))">
                    <MudIcon Class="me-2" Icon="@Icons.Filled.AirplanemodeActive"/>Player Ships
                </MudMenuItem>
                <MudMenuItem OnClick="@(() => NavigationManager.NavigateTo("shipweapons"))">
                    <MudIcon Class="me-2" Icon="@Icons.Filled.AutoFixHigh"/>Ship Weapons
                </MudMenuItem>
                <MudMenuItem OnClick="@(() => NavigationManager.NavigateTo("shipweaponproperties"))">
                    <MudIcon Class="me-2" Icon="@Icons.Filled.Build"/>Ship Weapon Properties
                </MudMenuItem>
            </MudMenu>
            <MudButton Class="mx-3" StartIcon="@Icons.Filled.Fort"
                OnClick="@(() => NavigationManager.NavigateTo("encounters"))">Encounters</MudButton>
            <MudButton Class="mx-3" StartIcon="@Icons.Filled.Houseboat"
                OnClick="@(() => NavigationManager.NavigateTo("shipencounters"))">Ship Encounters</MudButton>
            <MudButton Class="mx-3" StartIcon="@Icons.Filled.Logout"
                OnClick="@(() => NavigationManager.NavigateTo("/account/logout"))">Logout</MudButton>

        </MudAppBar>
    }
    <MudDrawer @bind-Open="@_drawerOpen" Variant="DrawerVariant.Temporary">
        <MyNavMenu/>
    </MudDrawer>
    <MudMainContent Class="ma-4">
        @Body
    </MudMainContent>
</MudLayout>

@code {
    private bool _drawerOpen;

    private void DrawerToggle()
    {
        _drawerOpen = !_drawerOpen;
    }

    private readonly MudTheme MyCustomTheme = new()
    {
        PaletteDark = new Palette
        {
            Primary = Colors.Indigo.Lighten1,
            Secondary = Colors.DeepPurple.Lighten1,
            Tertiary = Colors.Teal.Default,
            Success = Colors.Green.Accent4,
            Background = Colors.Grey.Darken3,
            DrawerBackground = Colors.Grey.Darken3,
            DrawerText = Colors.Shades.White,
            DrawerIcon = Colors.Shades.White,
            BackgroundGrey = Colors.Grey.Darken1,
            AppbarBackground = Colors.Indigo.Darken2,
            Surface = Colors.Grey.Darken3,
            TextPrimary = Colors.Shades.White,
            TextSecondary = Colors.Grey.Default,
            TextDisabled = Colors.Grey.Lighten1,
            ActionDefault = Colors.Grey.Lighten4,
            ActionDisabled = Colors.Grey.Darken1,
            LinesDefault = Colors.Grey.Lighten4,
            Dark = Colors.Grey.Darken1
        }
    };
}